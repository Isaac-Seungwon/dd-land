<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- namespace == 호출할 Interface 이름 적기 -->
<mapper namespace="com.project.dd.guide.convenient.mapper.ConvenientMapper">
	
	<select id="getTotalCount" resultType="int">
		select count(*) from tblConvenient
	</select>
	
	<select id="list" parameterType="map" resultType="com.project.dd.guide.convenient.domain.ConvenientDTO">
		select *
		from (select n.*, rownum as rnum from (select c.convenient_seq, c.name, c.time, c.tel, c.img, cl.lat, cl.lng 
		from tblconvenient c inner join tblconvenientlocation cl on c.convenient_seq=cl.convenient_seq) n)
		where rnum between #{startIndex} and #{endIndex}
	</select>
	
	<select id="one" resultType="com.project.dd.guide.convenient.domain.ConvenientDTO">
		select c.convenient_seq, c.name, c.time, c.tel, c.img, cl.lat, cl.lng from tblconvenient c inner join tblconvenientlocation cl on c.convenient_seq=cl.convenient_seq where seq=#{seq}
	</select>
	

</mapper>