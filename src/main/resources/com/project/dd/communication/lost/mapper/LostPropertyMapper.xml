<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.project.dd.communication.lost.mapper.LostPropertyMapper">
	<select id="getTotalCount" resultType="int">
		select count(*) from tblLostProperty
	</select>
	
	<select id="getLostPropertyList" parameterType="map" resultType="com.project.dd.communication.lost.domain.LostPropertyDTO">
		select *
		from (select l.*, rownum as rnum from (select * from tblLostProperty order by lost_property_seq desc) l)
		where rnum between #{startIndex} and #{endIndex}
	</select>
	
	<insert id="addLostProperty" parameterType="com.project.dd.communication.lost.domain.LostPropertyDTO">
		insert into tblLostProperty (lost_property_seq, type, name, location, lost_property_date, img, result)
		values (seqtblLostProperty.nextVal, #{type}, #{name}, #{location}, #{lost_property_date}, #{img, jdbcType=VARCHAR}, '보관중')
	</insert>
	
	<select id="getLostProperty" parameterType="String" resultType="com.project.dd.communication.lost.domain.LostPropertyDTO">
		select * from tblLostProperty where lost_property_seq = #{seq}
	</select>
	
	<select id="getFileName" parameterType="String" resultType="String">
		select img from tblLostProperty where lost_property_seq = #{seq}
	</select>
	
	<update id="editLostProperty" parameterType="com.project.dd.communication.lost.domain.LostPropertyDTO">
		update tblLostProperty set type = #{type}, name = #{name}, location = #{location}, lost_property_date = #{lost_property_date}, img = #{img, jdbcType=VARCHAR}, result = #{result} where lost_property_seq = #{lost_property_seq}
	</update>
	
	<delete id="deleteLostProperty" parameterType="String">
		delete from tblLostProperty where lost_property_seq = #{seq}
	</delete>
</mapper>